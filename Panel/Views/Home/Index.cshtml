@model Dictionary<string, bool>

@{
    ViewData["Title"] = "Panel Pages";
    var pageLinks = new Dictionary<string, string> {
        { "Product", Url.Action("Index", "Product") },
        { "Category", Url.Action("Index", "Category") },
        { "Brand", Url.Action("Index", "Brand") }
    };
}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<div class="d-sm-flex align-items-center justify-content-between mb-4">
    <h1 class="h3 mb-0 text-gray-800">Panel Pages</h1>
</div>

<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Page Status Table</h6>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table table-bordered" width="100%" cellspacing="0">
                <thead>
                    <tr>
                        <th>Page</th>
                        <th>Link</th>
                        <th>Status</th>
                        <th>Toggle</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        <tr>
                            <td>@item.Key</td>
                            <td>
                                @if (pageLinks.ContainsKey(item.Key))
                                {
                                    <a href="@pageLinks[item.Key]" class="btn btn-sm btn-primary">Go to @item.Key</a>
                                }
                                else
                                {
                                    <span class="text-muted">No link</span>
                                }
                            </td>
                            <td>
                                @if (item.Value)
                                {
                                    <span class="badge badge-success">Active</span>
                                }
                                else
                                {
                                    <span class="badge badge-danger">Inactive</span>
                                }
                            </td>
                            <td>
                                <div class="form-check form-switch">
                                    <input class="form-check-input toggle-status" type="checkbox" data-page="@item.Key" id="switch-@item.Key" @(item.Value ? "checked" : "") />
                                    <label class="form-check-label ms-2" for="switch-@item.Key">
                                        @(item.Value ? "Active" : "Deactive")
                                    </label>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function() {
            $('.toggle-status').change(function() {
                var page = $(this).data('page');
                var status = $(this).is(':checked');
                $.ajax({
                    url: '@Url.Action("TogglePageStatus", "Home")',
                    type: 'POST',
                    data: { page: page, status: status },
                    success: function() { location.reload(); },
                    error: function() { alert('Error updating status!'); }
                });
            });
        });
    </script>
}
